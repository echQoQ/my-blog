import{_ as k}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as h,b as s,a,f as t,e as l,d as e,r as p,o as r}from"./app-D39E384z.js";const d={},A={id:"_0x03-用户自定义完整性",tabindex:"-1"},g={class:"header-anchor",href:"#_0x03-用户自定义完整性"},o={id:"_0x04-触发器",tabindex:"-1"},u={class:"header-anchor",href:"#_0x04-触发器"};function y(B,i){const n=p("font");return r(),h("div",null,[i[35]||(i[35]=s("p",null,[s("strong",null,"什么是数据库的完整性")],-1)),s("ul",null,[s("li",null,[a(n,{color:"#e36c09"},{default:t(()=>i[0]||(i[0]=[s("span",{style:{background:"rgba(160, 204, 246, 0.55)"}},"数据的正确性和相容性",-1)])),_:1})]),i[1]||(i[1]=s("li",null,[s("span",{style:{background:"rgba(160, 204, 246, 0.55)"}},"防止不合语义的数据进入数据库")],-1))]),i[36]||(i[36]=s("hr",null,null,-1)),i[37]||(i[37]=s("p",null,[s("strong",null,"什么是完整性控制机制")],-1)),s("ul",null,[s("li",null,[a(n,{color:"#e36c09"},{default:t(()=>i[2]||(i[2]=[l("完整性约束条件定义机制")])),_:1}),i[3]||(i[3]=s("ul",null,[s("li",null,"数据模型的组成部分"),s("li",null,"约束数据库中数据的定义")],-1))]),s("li",null,[a(n,{color:"#e36c09"},{default:t(()=>i[4]||(i[4]=[l("完整性检查机制")])),_:1}),i[5]||(i[5]=l(".")),i[6]||(i[6]=s("ul",null,[s("li",null,"检查用户发出的操作是否违背了完整性约束条件"),s("li",null,"在INSERT、UPDATE、DELETE语句执行时进行检查")],-1))]),s("li",null,[a(n,{color:"#e36c09"},{default:t(()=>i[7]||(i[7]=[l("违约处理")])),_:1}),i[8]||(i[8]=s("ul",null,[s("li",null,"如果发现用户的操作请求使数据违背了完整性约束条件，则采取一定的动作来保证数据的完整性"),s("li",null,"拒绝(NO ACTION)、级联(CASCADE)")],-1))])]),i[38]||(i[38]=s("hr",null,null,-1)),i[39]||(i[39]=s("p",null,[s("strong",null,"完整性约束条件作用的对象")],-1)),s("ul",null,[s("li",null,[a(n,{color:"#f79646"},{default:t(()=>i[9]||(i[9]=[l("列")])),_:1}),i[10]||(i[10]=l("：对属性的取值类型、范围、精度等的约束条件"))]),s("li",null,[a(n,{color:"#f79646"},{default:t(()=>i[11]||(i[11]=[l("元组")])),_:1}),i[12]||(i[12]=l("：对元组中各个属性列间的联系的约束"))]),s("li",null,[a(n,{color:"#f79646"},{default:t(()=>i[13]||(i[13]=[l("关系")])),_:1}),i[14]||(i[14]=l("：对若干元组间、关系集合上以及关系之间的联系的约束"))])]),i[40]||(i[40]=s("hr",null,null,-1)),i[41]||(i[41]=s("p",null,[s("strong",null,"完整性约束条件分类")],-1)),s("ul",null,[s("li",null,[a(n,{color:"#f79646"},{default:t(()=>[a(n,{color:"#f79646"},{default:t(()=>i[15]||(i[15]=[l("静态")])),_:1})]),_:1}),i[16]||(i[16]=s("ul",null,[s("li",null,"对静态对象的约束是反映数据库状态的合理性的约束")],-1))]),s("li",null,[a(n,{color:"#f79646"},{default:t(()=>i[17]||(i[17]=[l("动态")])),_:1}),i[18]||(i[18]=s("ul",null,[s("li",null,"对动态对象的约束是反映数据库状态变迁的约束")],-1))])]),i[42]||(i[42]=s("hr",null,null,-1)),i[43]||(i[43]=s("h2",{id:"_0x01-实体完整性",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_0x01-实体完整性"},[s("span",null,"0x01 实体完整性")])],-1)),a(n,{color:"#4f81bd"},{default:t(()=>i[19]||(i[19]=[l("实体完整性规则(Entity Integrity)")])),_:1}),i[44]||(i[44]=e(`****<ul><li>若属性A是基本关系R的主属性，则属性A不能取空值</li></ul><hr><p><strong>实体完整性实现</strong></p><ul><li>在CREATE TABLE语句中提供了PRIMARY  KEY子句，供用户在建表时指定关系的主码列。</li><li>在列级使用PRIMARY  KEY子句</li><li>在表级使用PRIMARY  KEY子句</li></ul><p>例1：在学生选课数据库中，要定义Student表的Sno属性为主码</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Student</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	(Sno       </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)  </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">primary key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	 Sname     </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)  ,            </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	 Ssex      </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) ,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	 Sage      </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	 Sdept    </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>例2：要在SC表中定义(Sno, Cno)为主码</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> SC</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	(Sno       </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) ,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	 Cno      </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) ,            </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	 Grade   </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	 primary key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (Sno,Cno) );</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,9)),s("ul",null,[i[24]||(i[24]=s("li",null,"用户程序对主码列进行更新操作时，系统自动进行完整性检查",-1)),s("li",null,[a(n,{color:"#e36c09"},{default:t(()=>i[20]||(i[20]=[l("违约操作")])),_:1}),i[21]||(i[21]=s("ul",null,[s("li",null,"使主属性值为空值得操作"),s("li",null,"使主码值在表中不唯一的操作")],-1))]),s("li",null,[a(n,{color:"#e36c09"},{default:t(()=>i[22]||(i[22]=[l("违约反应")])),_:1}),i[23]||(i[23]=s("ul",null,[s("li",null,"拒绝操作")],-1))])]),i[45]||(i[45]=e('<hr><h2 id="_0x02-参照完整性" tabindex="-1"><a class="header-anchor" href="#_0x02-参照完整性"><span>0x02 参照完整性</span></a></h2><p><strong>参照完整性规则</strong></p><ul><li>若属性（或属性组）F是基本关系R的外码，它与基本关系S的主码$K_s$相对应（基本关系R和S不一定是不同的关系），则对于R中每个元组在F上的值必须为： <ul><li>或者取空值（F的每个属性值均为空值）</li><li>或者等于S中某个元组的主码值。</li></ul></li></ul><hr><p><strong>参照完整性实现</strong></p><p>例：职工－部门数据库包含职工表EMP和部门表DEPT</p><ol><li>DEPT关系的主码为部门号Deptno</li><li>EMP关系的主码为职工号Empno，外码为部门号Deptno 称 DEPT 为被参照关系或目标关系，EMP 为参照关系</li></ol>',8)),a(n,{color:"#953734"},{default:t(()=>i[25]||(i[25]=[l("1. 外码是否可以接受空值的问题")])),_:1}),i[46]||(i[46]=s("ul",null,[s("li",null,"外码是否能够取空值：依赖于应用环境的语义"),s("li",null,[l("实现参照完整性 "),s("ul",null,[s("li",null,"系统提供定义外码的机制"),s("li",null,"定义外码列是否允许空值的机制")])])],-1)),i[47]||(i[47]=s("p",null,"例2：学生－选课数据库 Student关系为被参照关系，其主码为Sno。 SC为参照关系，外码为Sno。 若SC的Sno为空值：表明尚不存在的某个学生，或者某个不知学号的学生，选修了某门课程，其成绩记录在Grade中，与学校的应用环境是不相符的，因此SC的Sno列不能取空值。",-1)),a(n,{color:"#953734"},{default:t(()=>i[26]||(i[26]=[l("2. 在被参照关系中删除元组时的问题")])),_:1}),i[48]||(i[48]=e("<ul><li>出现违约操作的情形 <ul><li>删除被参照关系的某个元组（student），而参照关系有若干元组(SC)的外码值与被删除的被参照关系的主码值相同</li></ul></li><li>违约反应 <ul><li>受限删除(NO ACTION) <ul><li>当参照关系中没有任何元组的外码值与要删除的被参照关系的元组的主码值相对应时，系统才执行删除操作，否则拒绝此删除操作</li></ul></li><li>级联删除(CASCADE) <ul><li>将参照关系中外码值与被参照关系中要删除元组主码值相对应的元组一起删除</li></ul></li><li>置空值删除(NULLIFIES) <ul><li>删除被参照关系的元组，并将参照关系中与被参照关系中被删除元组主码值相等的外码值置为空值。</li></ul></li></ul></li></ul>",1)),a(n,{color:"#953734"},{default:t(()=>i[27]||(i[27]=[l("3. 在参照关系中插入元组时的问题")])),_:1}),i[49]||(i[49]=e("<ul><li>出现违约操作的情形 <ul><li>需要在参照关系中插入元组，而被参照关系不存在相应的元组</li></ul></li><li>违约反应 <ul><li>受限插入(NO ACTION) <ul><li>仅当被参照关系中存在相应的元组，其主码值与参照关系插入元组的外码值相同时，系统才执行插入操作，否则拒绝此操作。</li></ul></li><li>递归插入 <ul><li>首先向被参照关系中插入相应的元组，其主码值等于参照关系插入元组的外码值，然后向参照关系插入元组。</li></ul></li></ul></li></ul><hr>",2)),s("h2",A,[s("a",g,[s("span",null,[a(n,{color:"#e36c09"},{default:t(()=>i[28]||(i[28]=[l("0x03 用户自定义完整性")])),_:1})])])]),i[50]||(i[50]=s("p",null,[s("strong",null,"用CREATE TABLE语句在建表时定义用户完整性约束")],-1)),a(n,{color:"#953734"},{default:t(()=>i[29]||(i[29]=[l("可定义三类完整性约束")])),_:1}),i[51]||(i[51]=s("ul",null,[s("li",null,"列值非空(NOT NULL)"),s("li",null,"列值唯一(UNIQUE)"),s("li",null,"检查列值是否满足一个布尔表达式(CHECK)")],-1)),a(n,{color:"#953734"},{default:t(()=>i[30]||(i[30]=[l("约束命名")])),_:1}),i[52]||(i[52]=e(`<div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Constraint</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">约束名</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> [Primary key… | Foreign Key…  | Check …]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,1)),a(n,{color:"#953734"},{default:t(()=>i[31]||(i[31]=[l("修改约束")])),_:1}),i[53]||(i[53]=e(`<div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Alter</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> Table</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">表名</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Add</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">| </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Drop</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> Constraint</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">约束名</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><hr>`,2)),s("h2",o,[s("a",u,[s("span",null,[a(n,{color:"#245bdb"},{default:t(()=>i[32]||(i[32]=[l("0x04 触发器")])),_:1})])])]),i[54]||(i[54]=s("p",null,[s("strong",null,"通过触发器来定义复杂的完整性规则")],-1)),i[55]||(i[55]=s("ul",null,[s("li",null,"定义其它的完整性约束时，需要用数据库触发器（Trigger）来实现。"),s("li",null,"数据库触发器：一类靠事务驱动的特殊过程"),s("li",null,"一旦由某个用户定义，任何用户对该数据的增、删、改操作均由服务器自动激活相应的触发子，在核心层进行集中的完整性控制")],-1)),i[56]||(i[56]=s("hr",null,null,-1)),a(n,{color:"#953734"},{default:t(()=>i[33]||(i[33]=[l("定义数据库触发器的语句")])),_:1}),i[57]||(i[57]=e(`<div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> TRIGGER </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">触发器名</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">表名</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FOR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  {</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">| </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DELETE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">触发动作体</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1)),a(n,{color:"#953734"},{default:t(()=>i[34]||(i[34]=[l("删除数据库触发器的语句")])),_:1}),i[58]||(i[58]=e(`<div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DROP</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TRIGGER</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">触发器名</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><p>例. 计算机系学生成绩不低于60分,低于60分自动赋为60分</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Create</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> Trigger</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> chggrade</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> on</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> SC  </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> insert</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">as</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">update</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> SC </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> grade</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">60</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  where</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> exists</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> inserted</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">where</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> inserted</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">Sno</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">SC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">Sno</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> and</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> inserted</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">Cno</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">SC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">Cno</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">and</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> inserted</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">grade</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 60</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  )</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>例. 数学是必修课，所有学生都必须选，学生退学则将成绩置0</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">create</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> Trigger</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> selcou</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">on</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> student</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> insert</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">as</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">insert into</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> SC(Sno,Cno)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Sno, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;2&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> inserted</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">create</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> Trigger</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> sleft</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">on</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> student </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> delete</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">as</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">update</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> SC </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Grade </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">where</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Sno </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">in</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">( </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Sno </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> deleted)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr>`,8))])}const C=k(d,[["render",y],["__file","数据库完整性.html.vue"]]),b=JSON.parse('{"path":"/notes/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%8C%E6%95%B4%E6%80%A7.html","title":"数据库完整性","lang":"zh-CN","frontmatter":{"title":"数据库完整性","cover":"/assets/images/cover3.jpg","icon":"paper-plane","order":5,"author":"Mr.Liu","category":["笔记"],"tag":["数据库"],"sticky":false,"star":false,"footer":"箱根山岳险天下","copyright":"无版权","description":"什么是数据库的完整性 防止不合语义的数据进入数据库 什么是完整性控制机制 数据模型的组成部分 约束数据库中数据的定义 . 检查用户发出的操作是否违背了完整性约束条件 在INSERT、UPDATE、DELETE语句执行时进行检查 如果发现用户的操作请求使数据违背了完整性约束条件，则采取一定的动作来保证数据的完整性 拒绝(NO ACTION)、级联(CAS...","head":[["meta",{"property":"og:url","content":"https://echqoq.github.io/my-blog/my-blog/notes/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%8C%E6%95%B4%E6%80%A7.html"}],["meta",{"property":"og:site_name","content":"Mr.Liu"}],["meta",{"property":"og:title","content":"数据库完整性"}],["meta",{"property":"og:description","content":"什么是数据库的完整性 防止不合语义的数据进入数据库 什么是完整性控制机制 数据模型的组成部分 约束数据库中数据的定义 . 检查用户发出的操作是否违背了完整性约束条件 在INSERT、UPDATE、DELETE语句执行时进行检查 如果发现用户的操作请求使数据违背了完整性约束条件，则采取一定的动作来保证数据的完整性 拒绝(NO ACTION)、级联(CAS..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://echqoq.github.io/my-blog/my-blog/assets/images/cover3.jpg"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-09-03T12:38:06.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://echqoq.github.io/my-blog/my-blog/assets/images/cover3.jpg"}],["meta",{"name":"twitter:image:alt","content":"数据库完整性"}],["meta",{"property":"article:author","content":"Mr.Liu"}],["meta",{"property":"article:tag","content":"数据库"}],["meta",{"property":"article:modified_time","content":"2024-09-03T12:38:06.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"数据库完整性\\",\\"image\\":[\\"https://echqoq.github.io/my-blog/my-blog/assets/images/cover3.jpg\\"],\\"dateModified\\":\\"2024-09-03T12:38:06.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr.Liu\\"}]}"]]},"headers":[{"level":2,"title":"0x01 实体完整性","slug":"_0x01-实体完整性","link":"#_0x01-实体完整性","children":[]},{"level":2,"title":"0x02 参照完整性","slug":"_0x02-参照完整性","link":"#_0x02-参照完整性","children":[]},{"level":2,"title":"0x03 用户自定义完整性","slug":"_0x03-用户自定义完整性","link":"#_0x03-用户自定义完整性","children":[]},{"level":2,"title":"0x04 触发器","slug":"_0x04-触发器","link":"#_0x04-触发器","children":[]}],"git":{"createdTime":1725353821000,"updatedTime":1725367086000,"contributors":[{"name":"Iwindy","email":"12398041+iwindy0@user.noreply.gitee.com","commits":2}]},"readingTime":{"minutes":6.26,"words":1879},"filePathRelative":"notes/数据库/数据库完整性.md","localizedDate":"2024年9月3日","excerpt":"<p><strong>什么是数据库的完整性</strong></p>\\n<ul>\\n<li>\\n</li>\\n<li><span style=\\"background:rgba(160, 204, 246, 0.55)\\">防止不合语义的数据进入数据库</span></li>\\n</ul>\\n<hr>\\n<p><strong>什么是完整性控制机制</strong></p>\\n<ul>\\n<li>\\n<ul>\\n<li>数据模型的组成部分</li>\\n<li>约束数据库中数据的定义</li>\\n</ul>\\n</li>\\n<li>\\n.<ul>\\n<li>检查用户发出的操作是否违背了完整性约束条件</li>\\n<li>在INSERT、UPDATE、DELETE语句执行时进行检查</li>\\n</ul>\\n</li>\\n<li>\\n<ul>\\n<li>如果发现用户的操作请求使数据违背了完整性约束条件，则采取一定的动作来保证数据的完整性</li>\\n<li>拒绝(NO ACTION)、级联(CASCADE)</li>\\n</ul>\\n</li>\\n</ul>","autoDesc":true}');export{C as comp,b as data};
